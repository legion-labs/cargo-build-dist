name: verify
on: [push]

jobs:
  cargo-build-on-vm:
    name: Run cargo version and cargo build on VM
    strategy: 
      matrix:
        os: [[self-hosted, linux, common, build], [self-hosted, windows, common, build], [self-hosted, windows, gpu, build], [self-hosted, linux, gpu, build]]

    runs-on: ${{ matrix.os }}
    steps:
      - uses: actions/checkout@v2
      - name: Check cargo version
        run: cargo --version
        
      - name: Cargo build 
        run: cargo build
